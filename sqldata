create database inventory;
use inventory;

CREATE TABLE users (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100),
    email VARCHAR(100) UNIQUE,
    password VARCHAR(100),
    role ENUM('admin', 'employee'),
    store_id INT,
    FOREIGN KEY (store_id) REFERENCES stores(store_id)
);


CREATE TABLE stores (
    store_id INT PRIMARY KEY AUTO_INCREMENT,
    store_name VARCHAR(100),
    address TEXT,
    phone VARCHAR(20)
);


CREATE TABLE products (
    product_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100),
    category VARCHAR(50),
    size VARCHAR(10),
    color VARCHAR(30),
    price DECIMAL(10,2),
    cost_price DECIMAL(10,2),
    stock_quantity INT,
    gender ENUM('Men', 'Women', , 'Kids'),
    barcode VARCHAR(50),
    store_id INT,
    FOREIGN KEY (store_id) REFERENCES stores(store_id)
);


CREATE TABLE customers (
    customer_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100),
    phone VARCHAR(20),
    email VARCHAR(100),
    address TEXT
);


CREATE TABLE sales (
    sale_id INT PRIMARY KEY AUTO_INCREMENT,
    invoice_no VARCHAR(20),
    customer_id INT,
    user_id INT,
    store_id INT,
    sale_date DATETIME,
    total_amount DECIMAL(10,2),
    payment_mode ENUM('UPI', 'Cash', 'Card', 'NetBanking'),
    tax_amount DECIMAL(10,2),
    discount DECIMAL(10,2),
    final_amount DECIMAL(10,2),
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    FOREIGN KEY (store_id) REFERENCES stores(store_id)
);


CREATE TABLE sale_items (
    sale_item_id INT PRIMARY KEY AUTO_INCREMENT,
    sale_id INT,
    product_id INT,
    quantity INT,
    price_each DECIMAL(10,2),
    subtotal DECIMAL(10,2),
    FOREIGN KEY (sale_id) REFERENCES sales(sale_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);


CREATE TABLE vendors (
    vendor_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100),
    contact VARCHAR(20),
    address TEXT
);


CREATE TABLE purchases (
    purchase_id INT PRIMARY KEY AUTO_INCREMENT,
    vendor_id INT,
    product_id INT,
    quantity INT,
    purchase_price DECIMAL(10,2),
    total_cost DECIMAL(10,2),
    purchase_date DATETIME,
    store_id INT,
    FOREIGN KEY (vendor_id) REFERENCES vendors(vendor_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id),
    FOREIGN KEY (store_id) REFERENCES stores(store_id)
);


CREATE TABLE expenses (
    expense_id INT PRIMARY KEY AUTO_INCREMENT,
    store_id INT,
    category VARCHAR(50),
    amount DECIMAL(10,2),
    expense_date DATE,
    description TEXT,
    FOREIGN KEY (store_id) REFERENCES stores(store_id)
);